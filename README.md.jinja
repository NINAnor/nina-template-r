# {{ project_name }}

A modern, well-structured R project with tools for code quality, reproducibility, and collaboration, with support for VSCode and Copilot.

## Features

âœ¨ **Quality Tools**
- **[Prek](https://github.com/j178/prek)**: Automated code checks and linting
- **[Air](https://posit-dev.github.io/air/)**: Code formatting to maintain consistency

ðŸŽ¯ **Modern Workflows**
- **[Pixi](https://pixi.sh/)**: Reproducible environment management
- **[Radian](https://github.com/randy3k/radian)**: Enhanced R REPL with better UX
- **Git Hooks**: Automatic pre-commit checks

ðŸ“š **Best Practices**
- Organized directory structure (data, R, tests, vignettes)
- Environment variables for portable paths
- GitHub Actions CI/CD workflows

ðŸ”§ **Developer Experience**
- VS Code integration
- Consistent coding style
- Reproducible environments

## Quick Start

### Prerequisites

- [Pixi](https://pixi.sh/) - Package and environment manager
- [Git](https://git-scm.com/) - Version control
- [Air](https://posit-dev.github.io/air/) - Formatter

### Setup

1. **Clone the repository (or initialize it)**

   - If you are starting from an existing repository:
     ```bash
     git clone <repository-url>
     cd {{ project_slug }}
     ```

   - If you just created the folder using copier:
     ```bash
     cd {{ project_slug }}
     git init
     ```

2. ** Install the dependencies**

   ```bash
   pixi install
   ```

2. **Enable git hooks** (optional but recommended)
   ```bash
   pixi run prek install
   ```

## VS Code Setup

### Install Extensions

Install these recommended extensions for the best experience

### Running R Code

#### Open R Terminal

Use the R extension to open an interactive R terminal:

1. Open the Command Palette (`Ctrl+Shift+P`)
2. Search for **"R: Create R terminal"**
3. An R console will open in the integrated terminal
4. Run R commands directly in the console

#### Run R File

Execute R code from your editor:

- **Run selected line/block**: `Ctrl+Enter`
- **Run entire file**: `Ctrl+Shift+Enter`
- Right-click on file â†’ **"Run"** or **"Source"**

## Common Tasks

### Run R Scripts

```bash
pixi run Rscript scripts/my-script.R
```

### Interactive R Development

```bash
pixi run radian
```

### Format Code

Check formatting:
```bash
pixi run air format . --check
```

Auto-format code:
```bash
pixi run air format .
```

### Environment Variables

Define project paths in `.Renviron`:

```r
PROJECT_DATA_DIR=data/
PROJECT_OUTPUT_DIR=output/
PROJECT_SCRIPTS_DIR=R/
```

Use them in code:
```r
data_dir <- Sys.getenv("PROJECT_DATA_DIR", "data/")
input_file <- file.path(data_dir, "raw", "mydata.csv")
```

## Tools

### Pixi
Manages dependencies and R version. Ensures everyone uses the same environment.

**Useful commands:**
- `pixi install` - Set up environment
- `pixi shell` - Activate environment
- `pixi task list` - See available tasks

### Prek
Automated code quality checks on git commits.

**Useful commands:**
- `pixi run prek install` - Enable git hooks
- `pixi run prek --all-files` - Run all checks manually

### Air
Consistent code formatting for R.

**Useful commands:**
- `pixi run air format . --check` - Check formatting
- `pixi run air format .` - Auto-format all files

### Radian
Enhanced R REPL with better syntax highlighting and command history.

```bash
pixi run radian
```

## Development Workflow

```bash
# 1. Enter the environment
pixi shell

# 2. Make changes and test interactively
pixi run radian

# 3. Check code quality
# NOTE: this is optional, if you install prek hooks, these checks will run automatically on commit
pixi run air format . --check
pixi run prek --all-files

# 4. Commit
git add .
git commit -m "Your message"
git push
```

## GitHub Actions

The project includes CI/CD workflows that automatically:
- Check code formatting
- Run all quality checks
- Validate the build

These run on every push and pull request.

## Tips

1. **Use `Sys.getenv()` for paths** - Makes your code portable across machines
2. **Enable prek hooks** - Catches issues before you commit

## Troubleshooting

**Rebuild environment**
```bash
pixi install --no-lockfile
pixi install
```

## License

See LICENSE file for details.

## Contributing

1. Make changes in a feature branch
2. Run `pixi run air format .` and `pixi run prek --all-files`
3. Push and create a pull request
4. CI checks run automatically

---

**Happy coding!** ðŸš€
